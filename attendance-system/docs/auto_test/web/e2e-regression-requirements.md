# Web UI è‡ªåŠ¨åŒ–å›å½’æµ‹è¯•éœ€æ±‚æ–‡æ¡£

## 1. é¡¹ç›®ä¿¡æ¯
- **æ–‡æ¡£æ—¥æœŸ**: 2026-02-05
- **æ–‡æ¡£çŠ¶æ€**: Draft
- **ç›®æ ‡èŒƒå›´**: Web ç®¡ç†ç«¯ (packages/web)
- **æµ‹è¯•æ¡†æ¶**: Playwright (packages/e2e)

## 2. ç›®æ ‡
å°†å‰©ä½™çš„ 11 ä¸ª Web UI ä¿®å¤è®°å½•è½¬åŒ–ä¸º Playwright è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ï¼Œå»ºç«‹å…¨é¢çš„å‰ç«¯å›å½’é˜²æŠ¤ç½‘ï¼Œç¡®ä¿å·²ä¿®å¤çš„é—®é¢˜ä¸å†å¤ç°ã€‚

## 3. éœ€æ±‚èŒƒå›´
æœ¬æ¬¡å›å½’æµ‹è¯•è¦†ç›–ä»¥ä¸‹ 11 ä¸ªå·²ä¿®å¤çš„ Bugï¼š

| ä¼˜å…ˆçº§ | ä¿®å¤è®°å½•æ–‡ä»¶ | åŠŸèƒ½æ¨¡å— | ç¼ºå¤±çš„æµ‹è¯•åœºæ™¯ |
| :--- | :--- | :--- | :--- |
| **High** | `20260206-monthly-recalc-fix.md` | ç»Ÿè®¡æŠ¥è¡¨ | æœˆåº¦å¡è¡¨â€œè€ƒå‹¤è®¡ç®—â€æŒ‰é’®ç‚¹å‡»äº¤äº’ |
| **High** | `20260206-monthly-summary-recalc-fix.md` | ç»Ÿè®¡æŠ¥è¡¨ | æœˆåº¦æ±‡æ€»æŠ¥è¡¨ä¸€é”®é‡ç®—å¼¹çª—åŠäº¤äº’ |
| **High** | `20260206-recalc-button-fix.md` | ç»Ÿè®¡æŠ¥è¡¨ | æ¯æ—¥ç»Ÿè®¡æŠ¥è¡¨â€œè€ƒå‹¤è®¡ç®—â€æŒ‰é’®äº¤äº’ |
| **High** | `20260205-dailystats-total-fix.md` | ç»Ÿè®¡æŠ¥è¡¨ | æ¯æ—¥æŠ¥è¡¨æ€»è®°å½•æ•°æ˜¾ç¤ºåŠåˆ†é¡µåˆ‡æ¢ |
| **Medium** | `20260205-menu-blank-screen-fix.md` | å¯¼èˆªèœå• | ä¸€çº§åˆ†ç»„èœå•å±•å¼€/æŠ˜å é€»è¾‘ï¼ˆé˜²æ­¢ç™½å±ï¼‰ |
| **Medium** | `20260205-correction-menu-fix.md` | å¯¼èˆªèœå• | è¡¥ç­¾èœå•æ–‡æ¡ˆåŠè·³è½¬è·¯å¾„éªŒè¯ |
| **Medium** | `20260205-schedule-display-fix.md` | æ’ç­ç®¡ç† | æ—¥å†è§†å›¾å‘˜å·¥å§“åå’Œç­æ¬¡åæ˜¾ç¤º |
| **Medium** | `20260205-department-tree-real-data-fix.md` | æ’ç­ç®¡ç† | éƒ¨é—¨æ ‘åŠ è½½çœŸå®æ•°æ®åŠèŠ‚ç‚¹é€‰æ‹© |
| **Low** | `20260205-shift-pagination-fix.md` | ç­æ¬¡ç®¡ç† | ç­æ¬¡åˆ—è¡¨åˆ†é¡µæ§ä»¶åŠåŠ è½½é€»è¾‘ |
| **Low** | `20260205-daily-stats-icons-fix.md` | ç»Ÿè®¡æŠ¥è¡¨ | Material Icons å›¾æ ‡æ¸²æŸ“éªŒè¯ |
| **Low** | `20260205-dailystats-range-refactor.md` | ç»Ÿè®¡æŠ¥è¡¨ | æ—¥æœŸèŒƒå›´é€‰æ‹©å™¨äº¤äº’é€»è¾‘ |

## 4. å®æ–½è®¡åˆ’

### ğŸ“… Batch 1: ç»Ÿè®¡æŠ¥è¡¨ä¸è®¡ç®— (Priority: High)
**ç›®æ ‡**: ç¡®ä¿æ ¸å¿ƒçš„è€ƒå‹¤è®¡ç®—ä¸æŠ¥è¡¨æŸ¥çœ‹åŠŸèƒ½ç¨³å®šã€‚

**ä»»åŠ¡**:
1.  **Page Object**: æ–°å¢ `packages/e2e/pages/stats.page.ts`
    -   å°è£…æ—¥æœŸèŒƒå›´é€‰æ‹©å™¨
    -   å°è£…â€œè€ƒå‹¤è®¡ç®—â€/â€œé‡æ–°è®¡ç®—â€æŒ‰é’®
    -   å°è£…ç¡®è®¤å¼¹çª— (Dialog)
    -   å°è£…åˆ†é¡µæ§ä»¶ä¸æ€»æ•°æ˜¾ç¤º
2.  **Test Spec**: æ–°å¢ `packages/e2e/tests/stats/recalc.spec.ts`
    -   **Case 1**: æ¯æ—¥ç»Ÿè®¡ - ç‚¹å‡»è®¡ç®—ï¼Œç¡®è®¤å¼¹çª—ï¼ŒéªŒè¯ Toast åé¦ˆã€‚
    -   **Case 2**: æ¯æ—¥ç»Ÿè®¡ - åˆ‡æ¢åˆ†é¡µï¼ŒéªŒè¯æ•°æ®åŠ è½½ä¸æ€»æ•°æ˜¾ç¤ºã€‚
    -   **Case 3**: æœˆåº¦å¡è¡¨ - ç‚¹å‡»è®¡ç®—ï¼Œç¡®è®¤å¼¹çª—ï¼ŒéªŒè¯åé¦ˆã€‚
    -   **Case 4**: æœˆåº¦æ±‡æ€» - ç‚¹å‡»ä¸€é”®é‡ç®—ï¼Œç¡®è®¤å¼¹çª—ï¼ŒéªŒè¯åé¦ˆã€‚

### ğŸ§­ Batch 2: å¯¼èˆªä¸èœå• (Priority: Medium)
**ç›®æ ‡**: ç¡®ä¿ç³»ç»Ÿå¯¼èˆªç»“æ„æ­£ç¡®ï¼Œé˜²æ­¢èœå•æ“ä½œå¯¼è‡´åº”ç”¨å´©æºƒã€‚

**ä»»åŠ¡**:
1.  **Page Object**: æ‰©å±• `packages/e2e/pages/base.page.ts` æˆ–æ–°å¢ `layout.page.ts`
    -   å°è£…ä¾§è¾¹æ èœå•é¡¹å®šä½å™¨ (æ”¯æŒå±‚çº§ç»“æ„)
2.  **Test Spec**: æ–°å¢ `packages/e2e/tests/layout/navigation.spec.ts`
    -   **Case 1**: ç‚¹å‡»ä¸€çº§èœå•ï¼ˆå¦‚â€œè€ƒå‹¤ç®¡ç†â€ï¼‰ï¼ŒéªŒè¯ä»…å±•å¼€å­èœå•ï¼ŒURL ä¸å˜ï¼Œé¡µé¢ä¸ç™½å±ã€‚
    -   **Case 2**: éªŒè¯â€œè¡¥ç­¾å¤„ç†â€èœå•æ–‡æ¡ˆæ­£ç¡®ï¼ˆéâ€œè¡¥ç­¾è®°å½•â€ï¼‰ï¼Œç‚¹å‡»åè·³è½¬è‡³ `/attendance/corrections`ã€‚

### ğŸ—“ï¸ Batch 3: æ’ç­ç®¡ç†ä¸æ˜¾ç¤º (Priority: Medium)
**ç›®æ ‡**: ç¡®ä¿æ’ç­è§†å›¾æ•°æ®å±•ç¤ºå®Œæ•´ï¼Œéƒ¨é—¨æ ‘åŠŸèƒ½æ­£å¸¸ã€‚

**ä»»åŠ¡**:
1.  **Page Object**: æ–°å¢ `packages/e2e/pages/schedule.page.ts`
    -   å°è£…æ—¥å†è§†å›¾å•å…ƒæ ¼ (Cell)
    -   å°è£…å·¦ä¾§éƒ¨é—¨æ ‘èŠ‚ç‚¹ (Tree Node)
2.  **Test Spec**: æ–°å¢ `packages/e2e/tests/attendance/schedule-display.spec.ts`
    -   **Case 1**: ç­‰å¾…éƒ¨é—¨æ ‘åŠ è½½ï¼Œç‚¹å‡»ç‰¹å®šéƒ¨é—¨èŠ‚ç‚¹ï¼ŒéªŒè¯å³ä¾§æ—¥å†æ›´æ–°ã€‚
    -   **Case 2**: æ£€æŸ¥æ—¥å†å•å…ƒæ ¼ï¼ŒéªŒè¯åŒ…å«å‘˜å·¥å§“åå’Œç­æ¬¡åç§°æ–‡æœ¬ï¼ˆéç©ºï¼‰ã€‚

### ğŸ§© Batch 4: åŸºç¡€ç»„ä»¶ä¸æ ·å¼ (Priority: Low)
**ç›®æ ‡**: éªŒè¯é€šç”¨ç»„ä»¶äº¤äº’åŠè§†è§‰å…ƒç´ æ¸²æŸ“ã€‚

**ä»»åŠ¡**:
1.  **Page Object**:
    -   æ–°å»º `packages/e2e/pages/shift.page.ts` (å°è£…ç­æ¬¡åˆ—è¡¨)
    -   æ›´æ–° `stats.page.ts` (å°è£…å›¾æ ‡å…ƒç´ )
2.  **Test Spec**:
    -   æ–°å¢ `packages/e2e/tests/attendance/shift-list.spec.ts`: éªŒè¯ç­æ¬¡åˆ—è¡¨åˆ†é¡µã€‚
    -   æ›´æ–° `packages/e2e/tests/stats/recalc.spec.ts`: å¢åŠ  Visual/Class æ£€æŸ¥ï¼ŒéªŒè¯å›¾æ ‡æ˜¾ç¤ºä¸º Icon è€Œé Textã€‚
    -   æ›´æ–° `packages/e2e/tests/stats/recalc.spec.ts`: éªŒè¯æ—¥æœŸèŒƒå›´é€‰æ‹©å™¨çš„èµ·å§‹/ç»“æŸæ—¥æœŸè”åŠ¨ã€‚

## 5. æ ‡å‡†æ‰§è¡Œæµç¨‹ (SOP)
å¯¹æ¯ä¸ª Batch æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼Œç¡®ä¿å¤ç°çš„å‡†ç¡®æ€§ï¼š

1.  **Read (è¯»å–)**: è¯»å– `docs/bug_fix/*.md`ï¼Œå®Œå…¨ç†è§£ Bug çš„å¤ç°æ­¥éª¤å’Œé¢„æœŸè¡Œä¸ºã€‚
2.  **Check (æ£€æŸ¥)**: æ£€æŸ¥ `packages/web/src/pages/...` æºç ï¼Œç¡®å®šæœ€ä½³å…ƒç´ å®šä½ç­–ç•¥ (ä¼˜å…ˆä½¿ç”¨ Role, Text, Label)ã€‚
3.  **Model (å»ºæ¨¡)**: åœ¨ `pages/*.page.ts` ä¸­å°è£…è¯­ä¹‰åŒ–çš„æ“ä½œæ–¹æ³•ï¼Œå±è”½ DOM ç»†èŠ‚ã€‚
4.  **Write (ç¼–å†™)**: ç¼–å†™ `tests/*.spec.ts`ï¼Œæ¯ä¸ª Bug å¯¹åº”è‡³å°‘ä¸€ä¸ªç‹¬ç«‹çš„ `test()` ç”¨ä¾‹ã€‚
5.  **Verify (éªŒè¯)**: è¿è¡Œ `npx playwright test`ï¼Œç¡®ä¿æµ‹è¯•é€šè¿‡ä¸”æ— è¯¯æŠ¥ã€‚
