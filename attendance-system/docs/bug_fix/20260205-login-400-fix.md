# 登录 400 错误修复记录

## 问题描述
- **现象**：Web 端登录失败，报错 `AxiosError: Request failed with status code 400`，界面提示 `Invalid credentials`。
- **复现步骤**：使用账号 `admin` / 密码 `123456` 登录。
- **影响范围**：无法登录系统，影响所有功能使用。

## 设计锚定
- **所属规格**：UA1 (用户与权限)
- **原设计意图**：
  - 引用 `docs/features/UA1/design.md`：API `POST /api/v1/auth/login` 接收用户名密码，后端验证 hash。
  - 错误处理：用户名不存在、密码错误或用户未激活均返回 400 `Invalid credentials`。
- **当前偏离**：代码逻辑符合设计，但数据库中的实际数据与预期不符（密码 hash 不匹配）。

## 根因分析
- **直接原因**：数据库中 `admin` 用户的密码 hash 与输入密码 `123456` 不匹配。
- **根本原因**：初始数据（Seed）设置的密码可能不是 `123456`，或者是之前的开发测试中被修改。
- **相关代码**：`packages/server/src/modules/auth/auth.service.ts` (逻辑正确)

## 修复方案
- **修复思路**：编写临时脚本，将 `admin` 用户的密码重置为 `123456` 的 hash 值。
- **改动文件**：无代码改动（仅数据修正）。

## 验证结果
- [x] 原问题已解决：脚本验证新 hash 匹配 `123456`。
- [x] 回归测试通过：不涉及逻辑变更。
- [x] 设计一致性确认：符合 UA1 设计。

## 文档同步
- [ ] design.md：无需更新
- [ ] api-contract.md：无需更新

## 提交信息
无代码提交。
