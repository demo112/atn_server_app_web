# 用户列表 500 错误修复记录

## 问题描述
- **现象**：在用户列表页面（UserList.tsx）获取数据时，请求失败并返回 500 错误。
- **复现步骤**：
  1. 启动服务器（默认端口 3001）。
  2. 启动前端（Vite）。
  3. 访问用户列表页面。
  4. 观察网络请求，`/api/v1/users` 返回 500。

## 设计锚定
- **所属规格**：用户管理 (User Management)
- **原设计意图**：前端通过 Vite 代理访问后端 API。
- **当前偏离**：`packages/server/.env` 配置端口为 3001，而 `packages/web/vite.config.ts` 配置代理目标为 3000。导致代理连接失败，返回 500。

## 根因分析
- **直接原因**：端口配置不一致。
- **根本原因**：环境配置分散，且缺乏统一的端口管理机制。后端 `.env` 被修改为 3001，但前端配置未同步。
- **验证过程**：
  - 使用 `test_api_call.ts` 测试端口 3001，API 响应正常（200 OK）。
  - 使用 `test_api_call.ts` 测试端口 3000，连接被拒绝（ECONNREFUSED）。
  - 确认 Vite 代理指向了错误的端口 3000。

## 修复方案
- **修复思路**：将前端代理配置与后端实际运行端口对齐。
- **改动文件**：
  - `packages/web/vite.config.ts`: 将 `proxy` 目标从 `http://localhost:3000` 修改为 `http://localhost:3001`。

## 验证结果
- [x] 原问题已解决：API 在端口 3001 上经测试工作正常。
- [x] 回归测试通过：登录和获取用户列表接口在 3001 端口均正常。
- [x] 设计一致性确认：恢复了前后端通信链路。

## 文档同步
- [ ] design.md：无需更新（属配置问题）。
- [ ] api-contract.md：无需更新。

## 提交信息
fix(web): 修正 Vite 代理端口以匹配后端 3001 端口
