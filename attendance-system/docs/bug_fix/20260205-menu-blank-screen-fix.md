# 菜单调整后白屏问题修复记录

## 问题描述
- **现象**：菜单结构调整后，点击新的一级菜单（如“考勤配置”、“考勤处理”）导致页面白屏。
- **复现步骤**：
  1. 登录系统。
  2. 点击侧边栏的“考勤配置”菜单项。
  3. 页面变白，无法显示内容。
- **影响范围**：所有新增或修改了结构的一级菜单。

## 根因分析
- **直接原因**：一级菜单配置了虚拟路径（如 `/attendance-config`），但路由表中不存在这些路径。
- **根本原因**：`Sidebar` 组件无条件使用 `<Link to={item.path}>`，导致点击一级菜单时尝试跳转到不存在的路由。由于没有配置 404 或重定向，导致 Outlet 渲染为空（白屏）。
- **相关代码**：`packages/web/src/components/layout/Sidebar.tsx`

## 修复方案
- **修复思路**：修改 `Sidebar` 组件，对于包含子菜单的一级菜单项，点击时不再进行路由跳转，而是仅切换展开/折叠状态。
- **改动文件**：
  - `packages/web/src/components/layout/Sidebar.tsx`：引入 `expandedMenus` 状态管理，修改点击事件处理逻辑。
  - `docs/features/menu-restructure/design.md`：更新设计文档，明确一级菜单的交互行为。

## 验证结果
- [x] 原问题已解决：点击一级菜单仅展开子菜单，不跳转，不再白屏。
- [x] 回归测试通过：点击子菜单正常跳转到对应页面。
- [x] 编译通过：`pnpm --filter @attendance/web build` 成功。

## 提交信息
fix(web): 修复点击分组菜单导致白屏的问题

背景: 菜单重构后，部分一级菜单作为分组容器，配置了虚拟路径。
变更: 修改 Sidebar 组件，点击分组菜单时仅展开/折叠，不进行路由跳转。
影响: 解决了点击一级菜单跳转到不存在路径导致的白屏问题。
