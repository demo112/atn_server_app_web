# 考勤系统需求规格

## 一、系统概述

三端考勤管理系统，包含 Server（后端服务）、Web（管理端）、App（移动打卡端）。

## 二、功能规格

### SW62 考勤制度 - 基本规则

| 项目 | 说明 |
|------|------|
| 考勤时间计算 | 自动计算 |
| 考勤日切换点 | 默认凌晨5点 |

---

### SW63 时间段设置

#### 普通时间段

| 字段 | 说明 |
|------|------|
| 时间段名称 | 必填 |
| 上班时间 | 必填 |
| 下班时间 | 必填 |
| 签到开始时间 | 可选 |
| 签到结束时间 | 可选 |
| 签退开始时间 | 可选 |
| 签退结束时间 | 可选 |
| 是否必须签到 | 布尔 |
| 是否必须签退 | 布尔 |

#### 异常规则设置

| 场景 | 规则 |
|------|------|
| 已签到 | 迟到规则 |
| 已签退 | 早退规则 |
| 未签到 | 异常状态规则 |
| 未签退 | 异常状态规则 |

#### 弹性时间段

| 字段 | 说明 |
|------|------|
| 时间段名称 | 必填 |
| 弹性时长计算方式 | 首尾打卡计算 / 两两打卡累积计算 |
| 有效打卡间隔时长 | 分钟 |
| 每日工作时间 | 小时 |
| 跨天打卡时间切换点 | 用于跨自然日工作场景（如夜班）的考勤日分界时间。该时间点之前的打卡归属前一考勤日，之后的归属新考勤日。例如设为 05:00，则凌晨 3 点的打卡算前一天，6 点的打卡算当天 |

---

### SW64 班次管理

| 字段 | 说明 |
|------|------|
| 班次名称 | 必填 |
| 班次周期 | 周 |
| 时间段配置 | 最多8个时间段，按周展示 |

---

### SW65 排班管理

| 功能 | 说明 |
|------|------|
| 展示方式 | 按部门树展示人员排班 |
| 排班操作 | 将班次分配给人员/部门 |
| 删除排班 | 支持 |
| 有效期 | 每个人的排班需设置有效期 |

---

### SW66 补签处理

| 字段 | 说明 |
|------|------|
| 展示方式 | 按部门树展示异常记录 |
| 显示字段 | 工作日、部门、人员编号、姓名、班次名称、上下班时间段、签到时间、签退时间、考勤状态、缺勤时长 |
| 操作 | 补签到、补签退 |

---

### SW67 请假/出差处理

| 字段 | 说明 |
|------|------|
| 展示方式 | 按部门树展示请假记录 |
| 请假字段 | 员工姓名、开始时间、结束时间、假期类型、申请时间、人员编号、部门、备注 |
| 操作 | 新增、编辑、删除 |

---

### SW68 补签记录

| 字段 | 说明 |
|------|------|
| 展示方式 | 按部门树展示补签记录 |
| 显示字段 | 人员编号、姓名、部门、处理类型、补签时间、操作时间 |
| 操作 | 编辑、删除 |

---

### SW69 原始考勤数据

| 字段 | 说明 |
|------|------|
| 展示方式 | 按部门树展示打卡数据 |
| 显示字段 | 人员编号、姓名、部门、设备名称、时间、体温、口罩状态 |
| 查询条件 | 开始时间、结束时间、体温范围、口罩状态 |
| 导出 | 按部门、人员导出 |
| 数据保留 | 最长2年 |
| 备注 | 体温、口罩需设备支持 |

---

### SW70 考勤汇总

| 字段 | 说明 |
|------|------|
| 展示方式 | 按部门树展示汇总数据 |
| 显示字段 | 人员编号、姓名、部门、迟到时长、早退时长、出勤时长（实际/有效）、缺勤时长、请假时长、考勤明细链接 |
| 查询条件 | 开始时间、结束时间 |
| 导出 | 按部门、人员导出 |

---

### SW71 考勤明细

| 字段 | 说明 |
|------|------|
| 展示方式 | 按部门树展示明细数据 |
| 显示字段 | 工作日、人员编号、姓名、部门、班次、上下班时间段、签到时间、签退时间、出勤时长（实际/有效）、考勤状态、缺勤时长、备注 |
| 查询条件 | 开始时间、结束时间、状态 |
| 导出 | 按部门、人员导出 |
| 功能 | 支持手动计算考勤 |
| 数据保留 | 最长2年 |

---

### SW72 统计报表

| 报表类型 | 说明 |
|----------|------|
| 日报表 | 每日考勤统计 |
| 月报表 | 每月考勤统计 |
| 部门报表 | 按部门统计 |
| 年报表 | 年度考勤统计 |
| 请假出差报表 | 请假出差统计 |
| 考勤异常报表 | 异常情况统计 |

---

## 三、模块边界（2人分工）

### 人A：用户/组织模块

| 模块 | 说明 |
|------|------|
| 用户管理 | 用户CRUD、认证、权限 |
| 组织架构 | 部门树管理 |
| 设备管理 | 打卡设备管理 |

### 人B：考勤模块

| 模块 | 对应规格 |
|------|----------|
| 考勤制度 | SW62 |
| 时间段/班次/排班 | SW63、SW64、SW65 |
| 考勤处理 | SW66、SW67、SW68 |
| 考勤统计 | SW69、SW70、SW71、SW72 |

---

## 四、开发优先级

| 优先级 | 内容 | 目标 |
|--------|------|------|
| P0 | 用户登录 + 基础打卡 | 最小可用 |
| P1 | 排班 + 考勤处理 + 基础报表 | 核心功能 |
| P2 | 完整报表 + 设备管理 | 完整功能 |
