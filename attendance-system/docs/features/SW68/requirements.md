# Requirements: SW68 补签记录

## Overview

SW68 补签记录模块允许管理员查看系统中的所有补签操作历史，并对错误的补签进行编辑或删除。补签通常是针对员工漏打卡、设备故障等情况的人工干预，该模块提供了对这些干预措施的审计和修正能力。

## User Stories

### Story 1: 查看补签记录列表

As a 管理员, I want 在管理后台按部门查看补签记录列表, so that 审计补签操作和了解补签情况

**Acceptance Criteria:**
- [ ] AC1: 页面左侧展示部门树，点击部门筛选该部门（及子部门）下的补签记录
- [ ] AC2: 列表显示字段包括：人员编号、姓名、部门、处理类型（补签到/补签退）、补签时间（补的是哪天几点）、操作时间、操作人
- [ ] AC3: 支持分页展示
- [ ] AC4: 列表默认按操作时间倒序排列

### Story 2: 编辑补签记录

As a 管理员, I want 修改错误的补签记录, so that 修正补签时间或类型

**Acceptance Criteria:**
- [ ] AC1: 点击列表中的“编辑”按钮，弹出编辑窗口
- [ ] AC2: 允许修改补签时间（具体的日期和时分秒）
- [ ] AC3: 保存后，系统自动重新计算该员工当天的考勤状态（如从缺勤变为迟到/正常）
- [ ] AC4: 保存后，操作时间更新为当前时间，操作人更新为当前管理员

### Story 3: 删除补签记录

As a 管理员, I want 删除错误的补签记录, so that 撤销无效的补签操作

**Acceptance Criteria:**
- [ ] AC1: 点击列表中的“删除”按钮，弹出确认对话框
- [ ] AC2: 确认删除后，该补签记录从列表中移除（物理删除或逻辑删除）
- [ ] AC3: 删除后，系统自动回滚该员工当天的考勤状态（如从正常变回缺勤/异常）

## Constraints

- **数据一致性**：编辑或删除补签必须同步触发考勤状态的重算，确保报表数据的准确性。
- **权限控制**：只有具备“考勤管理”权限的管理员才能操作。

## Out of Scope

- 员工端查看补签记录（员工在“我的考勤”中查看，不在本模块范围）
- 批量导入补签记录（属于 SW66 补签处理的增强功能）

## Assumptions

以下假设已与用户确认：
1. **重算机制**：编辑或删除补签会**立即**触发单人单日的考勤状态重算。
2. **数据范围**：页面默认展示最近一个月的数据，用户可筛选查看最近2年的数据。
3. **删除逻辑**：删除补签记录执行**物理删除**，系统自动回滚考勤状态。

## Metadata

- 规格编号：SW68
- 涉及模块：attendance, user
- 涉及端：Server, Web
- 负责人：naruto
- 状态：Draft
