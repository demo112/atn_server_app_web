# Requirements: 时间段设置 (SW63)

## Overview

时间段（Time Period）是考勤系统的基础配置单元，定义了员工的工作时间规则。本功能支持管理“普通时间段”和“弹性时间段”，用于后续的班次组合。

## User Stories

### Story 1: 管理普通时间段

As a 考勤管理员, I want 创建和编辑普通时间段, so that 我可以定义标准的上下班规则

**Acceptance Criteria:**
- [ ] AC1: 支持设置时间段名称（必填）
- [ ] AC2: 支持设置核心工作时间（上班时间、下班时间，必填）
- [ ] AC3: 支持设置打卡范围（签到开始/结束时间，签退开始/结束时间）
- [ ] AC4: 支持设置是否必须打卡（签到/签退是否必须）
- [ ] AC5: 支持设置异常规则（迟到/早退/未打卡规则）
- [ ] AC6: 上班时间 > 下班时间时，自动识别为跨天（次日）

### Story 2: 管理弹性时间段

As a 考勤管理员, I want 创建和编辑弹性时间段, so that 我可以定义灵活的工作制（如研发弹性制）

**Acceptance Criteria:**
- [ ] AC1: 支持设置弹性时间段名称（必填）
- [ ] AC2: 支持设置每日工作时长（如 8小时）
- [ ] AC3: 支持选择计算方式（首尾打卡时长 / 累积打卡时长）
- [ ] AC4: 支持设置有效打卡间隔（如 30分钟内重复打卡不计）
- [ ] AC5: 支持设置跨天切换点（如 05:00，用于界定考勤日）

### Story 3: 时间段列表管理

As a 考勤管理员, I want 查看和删除时间段, so that 我可以维护系统中的时间规则

**Acceptance Criteria:**
- [ ] AC1: 列表展示所有时间段（名称、类型、工作时间摘要）
- [ ] AC2: 支持按名称搜索
- [ ] AC3: 支持删除时间段（需校验是否被班次引用，引用中不可删除）

## Constraints

- 引用检查：被班次（Shift）使用的时间段不允许直接删除
- 时间格式：所有时间点精确到分钟（HH:mm）
- 跨天支持：必须支持跨自然日的班次（如 22:00 - 次日 06:00）

## Out of Scope

- 具体的排班（Scheduling）：本功能只定义时间规则，不分配给具体人员
- 复杂的休息时间配置（Break Time）：本期暂不支持段间休息扣除

## Assumptions

以下假设需确认：
1. 普通时间段的“异常规则”作为时间段的属性存储，不单独作为全局规则。
2. 跨天逻辑通过时间比较自动判定（如 下班 < 上班 则视为次日）。
3. 弹性时间段不需要定义具体的上下班时间点，只考核时长。

## Metadata

- 规格编号：SW63
- 涉及模块：attendance
- 涉及端：Web, Server
- 创建时间：2026-01-31
- 状态：待确认
