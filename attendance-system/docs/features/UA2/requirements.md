# Requirements: UA2 人员与部门管理

## Overview
实现企业员工档案与组织架构的一体化管理。管理员在一个统一的界面中维护部门树形结构（涵盖 UA3 部门管理需求）和员工档案，支持部门的增删改查以及员工的入离职管理。

## User Stories

### Story 1: 部门结构管理
As a 管理员, I want 在人员管理界面直接维护部门结构, so that 快速调整组织架构。

**Acceptance Criteria:**
- [x] AC1: **左侧部门树**：展示部门层级结构，支持展开/折叠。
- [x] AC2: **新增部门**：在部门树上操作（如右键菜单或顶部工具栏），支持添加子部门。
- [x] AC3: **编辑部门**：支持修改部门名称。
- [x] AC4: **删除部门**：支持删除部门。
- [x] AC5: **删除校验**：若部门下存在子部门或已关联员工，禁止删除并提示原因。
- [x] AC6: **循环引用校验**：编辑上级部门时，禁止选择自己或自己的子部门作为父节点。

### Story 2: 员工档案维护
As a 管理员, I want 新增、编辑和删除员工信息, so that 维护准确的企业人员名册。

**Acceptance Criteria:**
- [x] AC1: 新增员工时必填：姓名、工号、部门、入职日期
- [x] AC2: 工号在全系统内唯一，重复时提示错误
- [x] AC3: 能修改除工号外的所有信息
- [x] AC4: **删除员工**：支持删除操作，删除后该工号立即释放可被再次使用
- [x] AC5: **历史保留**：删除员工后，其历史考勤记录必须保留，且能正确显示员工姓名

### Story 3: 员工列表与查询
As a 管理员, I want 搜索和查看员工列表, so that 快速定位目标人员。

**Acceptance Criteria:**
- [x] AC1: **右侧员工列表**：点击左侧部门树节点，右侧显示该部门下的员工。
- [x] AC2: 列表展示字段：姓名、工号、部门、职位、手机号
- [x] AC3: 支持关键字搜索（姓名/工号/手机号）
- [x] AC4: **已删除隐藏**：列表仅显示在职员工，已删除员工不可见
- [x] AC5: 列表支持分页

### Story 4: 员工账号关联
As a 管理员, I want 将员工档案与系统用户账号关联, so that 员工可以登录系统。

**Acceptance Criteria:**
- [x] AC1: 在员工详情中可选择未绑定的 User 账号进行绑定
- [x] AC2: 一个员工只能绑定一个 User 账号
- [x] AC3: 支持解除绑定
- [x] AC4: 删除员工时，应自动解除账号绑定

## Constraints

- **数据完整性**：删除部门时，若部门下有员工，禁止删除或提示转移。
- **唯一性**：工号 (employee_no) 在“在职”员工中必须唯一。
- **操作体验**：部门操作应尽量使用模态框或行内编辑，避免页面跳转。

## Out of Scope

- 部门合并/拆分工具
- 复杂的入离职流程审批
- 薪资与社保信息管理
- 员工自助修改个人档案
- 恢复已删除的员工
