# Requirements: SW70 考勤汇总

## Overview

考勤汇总模块用于统计员工在指定时间段内的考勤情况，包括出勤天数、迟到/早退/缺勤时长、请假时长等关键指标。该功能主要供管理员和HR使用，用于核算薪资和绩效。

## User Stories

### Story 1: 查看部门考勤汇总

As a 管理员, I want 查看指定部门和时间段的考勤汇总列表, so that 了解员工的整体出勤表现

**Acceptance Criteria:**
- [ ] AC1: 支持按“部门”筛选（包含子部门员工）
- [ ] AC2: 支持按“日期范围”筛选（开始日期~结束日期）
- [ ] AC3: 列表展示字段：工号、姓名、部门、应出勤天数、实际出勤天数、迟到次数/时长、早退次数/时长、缺勤天数、请假时长
- [ ] AC4: 列表支持按迟到/早退/缺勤等指标排序
- [ ] AC5: 默认展示当前月份的数据

### Story 2: 导出考勤汇总

As a HR, I want 将考勤汇总数据导出为Excel, so that 进行线下的薪资核算

**Acceptance Criteria:**
- [ ] AC1: 点击“导出”按钮，下载当前筛选条件下的汇总报表
- [ ] AC2: 导出文件格式为 Excel (.xlsx)
- [ ] AC3: 导出内容包含列表所有字段

### Story 3: 跳转查看明细

As a 管理员, I want 点击某员工的汇总记录跳转到每日明细, so that 查看具体的异常情况

**Acceptance Criteria:**
- [ ] AC1: 列表中的“姓名”或操作列提供“查看明细”链接
- [ ] AC2: 点击跳转到考勤明细页面（SW71），并自动带入该员工和时间范围条件

## Constraints

- **性能要求**: 统计查询需在 3秒内 返回结果（假设数据量 < 10万条记录）
- **数据一致性**: 汇总数据必须与每日明细表 (`att_daily_records`) 保持一致
- **权限控制**: 只能查看自己管理范围内的部门数据

## Out of Scope

- **考勤明细页面** (SW71): 本模块只负责跳转，不实现明细页
- **考勤规则配置**: 不在此模块进行
- **移动端展示**: 目前仅实现 Web 端

## Assumptions

以下假设已与用户确认：
- 汇总数据主要来源于 `att_daily_records` 表
- “请假时长”需要结合 `att_leaves` 表或后续在 `att_daily_records` 中增加字段（本阶段暂通过关联查询或预留字段处理）
- 每日考勤结果（SW71/SW69）由 Naruto 负责生成，本模块只负责读取和统计

## Metadata

- 规模：中
- 涉及模块：server (statistics), web (report)
- 涉及端：Web
- 创建时间：2026-02-02
- 状态：已确认
